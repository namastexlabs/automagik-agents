# ============================================================================
# AUTOMAGIK AGENTS - ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env and configure your values
# Required variables are marked with (REQUIRED)
# Optional variables have default values or can be left empty

# ============================================================================
# AUTHENTICATION (REQUIRED)
# ============================================================================
AM_API_KEY=am-xxxxx                    # (REQUIRED) API key for authenticating requests
OPENAI_API_KEY=                        # (REQUIRED) OpenAI API key for agent operations  

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
AM_PORT=8881                           # Port to run the server on
AM_HOST=0.0.0.0                        # Host to bind the server to
AM_ENV=development                     # Environment: development, production, testing

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
AM_LOG_LEVEL=INFO                      # Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
AM_VERBOSE_LOGGING=false               # Enable verbose logging with additional details
AM_LOG_TO_FILE=false                   # Enable logging to file for debugging
AM_LOG_FILE_PATH=debug.log             # Path to log file when file logging is enabled
AM_TIMEZONE=UTC                        # Timezone for the agent (e.g., America/Sao_Paulo, UTC)

# Logfire Configuration (Optional)
LOGFIRE_TOKEN=                         # Logfire token for logging service
LOGFIRE_IGNORE_NO_CONFIG=true          # Suppress Logfire warning if no token

# ============================================================================
# AGENT CONFIGURATION
# ============================================================================
AM_AGENTS_NAMES=simple_agent           # Comma-separated list of agent names to pre-instantiate at startup

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/automagik_agents

# PostgreSQL Connection Details
POSTGRES_HOST=postgres                # PostgreSQL host (Docker service name)
POSTGRES_PORT=5432                     # PostgreSQL port
POSTGRES_USER=postgres                 # PostgreSQL username
POSTGRES_PASSWORD=postgres             # PostgreSQL password
POSTGRES_DB=automagik_agents           # PostgreSQL database name
POSTGRES_POOL_MIN=10                   # Minimum connections in the pool
POSTGRES_POOL_MAX=25                   # Maximum connections in the pool

# ============================================================================
# GRAPHITI / NEO4J CONFIGURATION (Knowledge Graph)
# ============================================================================
NEO4J_URI=bolt://neo4j:7687                             # Neo4j connection URI (e.g., bolt://localhost:7687)
NEO4J_USERNAME=neo4j                   # Neo4j username (default admin user)
NEO4J_PASSWORD=automagik123 # Neo4j password (CHANGE THIS)
GRAPHITI_NAMESPACE_ID=automagik        # Project namespace ID for Graphiti
GRAPHITI_ENV=development               # Environment for Graphiti

# ============================================================================
# GRAPHITI QUEUE CONFIGURATION (Async Performance)
# ============================================================================
GRAPHITI_QUEUE_ENABLED=true            # Enable asynchronous Graphiti queue processing
GRAPHITI_QUEUE_MAX_WORKERS=10          # Maximum number of Graphiti background workers
GRAPHITI_QUEUE_MAX_SIZE=1000           # Maximum queue size for pending Graphiti operations
GRAPHITI_QUEUE_RETRY_ATTEMPTS=3        # Maximum retry attempts for failed Graphiti operations
GRAPHITI_QUEUE_RETRY_DELAY=5           # Delay in seconds between retry attempts
GRAPHITI_BACKGROUND_MODE=true          # Process Graphiti operations in background (non-blocking)
GRAPHITI_MOCK_ENABLED=false            # Use fast mock processing (for testing/development)

# ============================================================================
# LLM PERFORMANCE CONFIGURATION
# ============================================================================
LLM_MAX_CONCURRENT_REQUESTS=15         # Maximum concurrent requests to LLM provider
LLM_RETRY_ATTEMPTS=3                   # Number of retry attempts for LLM calls on transient errors

# ============================================================================
# API SERVER PERFORMANCE
# ============================================================================
UVICORN_LIMIT_CONCURRENCY=100          # Maximum concurrent in-process requests
UVICORN_LIMIT_MAX_REQUESTS=1000        # Maximum requests before worker recycling

# ============================================================================
# THIRD-PARTY INTEGRATIONS (Optional)
# ============================================================================

# Notion Integration
NOTION_TOKEN=                          # Notion integration token

# Airtable Integration
AIRTABLE_TOKEN=                        # Airtable personal access token (PAT)
AIRTABLE_DEFAULT_BASE_ID=              # Default Airtable base ID for tools

# BlackPearl Integration
BLACKPEARL_TOKEN=                      # BlackPearl API token
BLACKPEARL_API_URL=                    # BlackPearl API URL
BLACKPEARL_DB_URI=                     # BlackPearl database URI

# Discord Integration (Only required for Discord agent)
DISCORD_BOT_TOKEN=

# Omie Integration
OMIE_TOKEN=                            # Omie API token

# Google Drive Integration
GOOGLE_DRIVE_TOKEN=                    # Google Drive API token

# Evolution API (WhatsApp)
EVOLUTION_API_KEY=                     # Evolution API key
EVOLUTION_API_URL=                     # Evolution API URL  
EVOLUTION_INSTANCE=agent               # Evolution API instance name
DEFAULT_EVOLUTION_INSTANCE=default     # Default Evolution instance
DEFAULT_WHATSAPP_NUMBER=5511999999999@s.whatsapp.net  # Default WhatsApp number

# Flashed Integration
FLASHED_API_KEY=                       # Flashed API key
FLASHED_API_URL=                       # Flashed API URL

# Supabase Integration
SUPABASE_URL=                          # Supabase project URL
SUPABASE_SERVICE_ROLE_KEY=             # Supabase service role key

# ============================================================================
# SYSTEM CONFIGURATION
# ============================================================================
PYTHONWARNINGS=                        # Python warnings configuration

# ============================================================================
# NOTES
# ============================================================================
# 
# QUICK START:
# 1. Set AM_API_KEY, OPENAI_API_KEY
# 2. Configure database settings if not using defaults
# 3. For Graphiti (knowledge graph), set Neo4j connection details
# 4. For production: Set AM_ENV=production, disable verbose logging
# 
# PERFORMANCE TUNING:
# - Increase GRAPHITI_QUEUE_MAX_WORKERS for heavy Graphiti loads
# - Set GRAPHITI_MOCK_ENABLED=true for testing without real Graphiti
# - Adjust LLM_MAX_CONCURRENT_REQUESTS based on OpenAI rate limits
# 
# TROUBLESHOOTING:
# - Enable AM_VERBOSE_LOGGING=true and AM_LOG_TO_FILE=true for debugging
# - Check GRAPHITI_QUEUE_ENABLED=false if experiencing queue issues
# - Use AM_LOG_LEVEL=DEBUG for detailed logging
#
# ============================================================================ 